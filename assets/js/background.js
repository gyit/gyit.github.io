function Animate(a,b){this.canvas=a,this.options=defaults(b||{},this.options),this.init()}function Point(a,b,c,d){this.options=d||{},this.id=c,this.ctx=b,this.position=a||{x:0,y:0},this.origin={x:this.position.x,y:this.position.y},this.opacity=0,this.closest=[]}function Circle(a,b,c){this.options=c||{},this.point=a||null,this.radius=this.options.radius||null,this.color=this.options.color||null,this.opacity=0,this.ctx=b}function defaults(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a}Animate.prototype.options={density:10,speed:10,sync:!1,distance:100,lineColor:"255, 255, 255",circleColor:"255, 255, 255",radius:20,lineWidth:1,lines:3,updateClosest:!1,mouse:!0},Animate.prototype.init=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.target={position:{x:this.width/2,y:this.height/2}},this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this)),this.options.mouse!==!0||"ontouchstart"in window||window.addEventListener("mousemove",this.mousemove.bind(this)),this.points=[];for(var a=0;a<this.width;a+=this.width/this.options.density)for(var b=0;b<this.height;b+=this.height/this.options.density){var c=new Point({x:a+Math.random()*this.width/this.options.density,y:b+Math.random()*this.height/this.options.density},this.ctx,this.points.length+1,this.options);this.points.push(c)}for(var d in this.points)this.points[d].circle=new Circle(this.points[d],this.ctx,this.options);this.findClosest(),this.animate(),this.shiftPoints(),this.options.mouse===!1&&this.moveTarget()},Animate.prototype.findClosest=function(){for(var a=0;a<this.points.length;a++){var b=this.points[a];b.closest=[];for(var c=0;c<this.points.length;c++){var d=this.points[c];if(b.id!==d.id){var f,e=!1;for(f=0;f<this.options.lines;f++)e||"undefined"==typeof b.closest[f]&&(b.closest[f]=d,e=!0);for(f=0;f<this.options.lines;f++)e||b.distanceTo(d)<b.distanceTo(b.closest[f])&&(b.closest[f]=d,e=!0)}}}},Animate.prototype.animate=function(){var a;this.options.updateClosest&&this.findClosest();for(a in this.points)this.points[a].distanceTo(this.target,!0)<5e3?(this.points[a].opacity=.4,this.points[a].circle.opacity=.6):this.points[a].distanceTo(this.target,!0)<1e4?(this.points[a].opacity=.2,this.points[a].circle.opacity=.3):this.points[a].distanceTo(this.target,!0)<3e4?(this.points[a].opacity=.1,this.points[a].circle.opacity=.2):(this.points[a].opacity=.05,this.points[a].circle.opacity=.05);this.ctx.clearRect(0,0,this.width,this.height);for(a in this.points)this.points[a].drawLines(),this.points[a].circle.draw();window.requestAnimationFrame(this.animate.bind(this))},Animate.prototype.shiftPoints=function(){for(var a in this.points)this.points[a].shift()},Animate.prototype.resize=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width,this.canvas.height=this.height},Animate.prototype.mousemove=function(a){a.pageX||a.pageY?(this.target.position.x=a.pageX,this.target.position.y=a.pageY):(a.clientX||a.clientY)&&(this.target.position.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.target.position.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)},Animate.prototype.moveTarget=function(){var a=this;TweenLite.to(this.target.position,2,{x:Math.random()*(this.width-200)+100,y:Math.random()*(this.height-200)+100,ease:Expo.easeInOut,onComplete:function(){a.moveTarget()}})},Point.prototype.distanceTo=function(a,b){b=b||!1;var c=Math.pow(this.position.x-a.position.x,2)+Math.pow(this.position.y-a.position.y,2);return b?Math.abs(c):c},Point.prototype.drawLines=function(){for(var a in this.closest)if(this.opacity>0){this.ctx.beginPath(),this.ctx.moveTo(this.position.x,this.position.y);var b=a+1;this.closest[b]||(b=0),this.ctx.lineCap="round",this.ctx.strokeStyle="rgba("+this.options.lineColor+", "+this.opacity+")",this.ctx.lineWidth=this.options.lineWidth,this.ctx.lineTo(this.closest[a].position.x,this.closest[a].position.y),this.ctx.stroke()}},Point.prototype.shift=function(){var a=this,b=this.options.speed;this.options.sync!==!0&&(b-=this.options.speed*Math.random()),TweenLite.to(this.position,b,{x:this.origin.x-this.options.distance/2+Math.random()*this.options.distance,y:this.origin.y-this.options.distance/2+Math.random()*this.options.distance,ease:Expo.easeInOut,onComplete:function(){a.shift()}})},Circle.prototype.draw=function(){this.opacity>0&&(this.ctx.beginPath(),this.ctx.arc(this.point.position.x,this.point.position.y,this.options.radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba("+this.options.circleColor+", "+this.opacity+")",this.ctx.fill())},new Animate(document.getElementById("canvas"));